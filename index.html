<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kuzey'in Coğrafi Macerası - Oynayarak Öğren</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap');
        
        * {
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Roboto', sans-serif;
            background-color: #0b1120;
            color: #f0f4f8;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 0;
            overflow: hidden;
        }

        .background-svgs {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            overflow: hidden;
        }

        .star {
            position: absolute;
            fill: #fdfd96;
            opacity: 0.7;
            animation: twinkle 4s infinite ease-in-out;
        }
        
        .moon {
            position: absolute;
            fill: #c0c0c0;
            opacity: 0.6;
            animation: pulse 6s infinite ease-in-out;
        }

        .shooting-star {
            position: absolute;
            width: 3px;
            height: 3px;
            background-color: #fff;
            border-radius: 50%;
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.8), 0 0 20px rgba(255, 255, 255, 0.5);
            animation: shoot 3s linear infinite;
            opacity: 0;
            z-index: -1;
        }

        @keyframes shoot {
            0% {
                transform: translate(0, 0) scale(0.5);
                opacity: 0;
            }
            10% {
                opacity: 1;
                transform: translate(0, 0) scale(1);
            }
            100% {
                transform: translate(200px, 400px) scale(0.5);
                opacity: 0;
            }
        }

        @keyframes twinkle {
            0%, 100% { transform: scale(1); opacity: 0.7; }
            50% { transform: scale(1.2); opacity: 1; }
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 0.6; }
            50% { transform: scale(1.05); opacity: 0.8; }
        }

        /* ==================== TEMEL STİLLER ==================== */
        body {
            font-family: 'Roboto', sans-serif;
            background-color: #0b1120;
            color: #333;
            margin: 0;
            overflow-x: hidden;
        }

        .game-wrapper {
            width: 100%;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 10px;
        }
        
        /* Landing page ve intro için ortalama garantisi */
        .game-wrapper:not(.game-started) {
            display: flex !important;
            justify-content: center !important;
            align-items: center !important;
        }

        .game-card {
            width: 100%;
            background-color: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(8px);
            border-radius: 15px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            padding: 20px;
        }

        /* Diğer temel stiller... (buton, input vs) */
        /* ... */

        /* Image panel sadece oyunda görünür */
        .image-panel {
            display: none !important;
        }
        
        /* Oyun başladığında görünür olsun */
        .game-wrapper.game-started .image-panel {
            display: flex !important;
        }
        
        /* Landing page ve intro ekranlarında kesinlikle gizle */
        .game-wrapper:not(.game-started) .image-panel {
            display: none !important;
        }
        
        /* ============ OYUN İÇİ DÜZEN (MOBİL) ============ */
        .game-wrapper.game-started {
            flex-direction: column;
            padding: 0;
        }
        .game-wrapper.game-started .image-panel {
            width: 100%;
            height: 35vh;
            padding: 10px;
            justify-content: center;
            align-items: center;
        }
        .game-wrapper.game-started .image-panel img {
            max-height: 100%;
            max-width: 100%;
            object-fit: contain;
            border: 8px solid transparent;
            border-image: linear-gradient(45deg, #FFD700, #FFC107, #DAA520) 1;
            filter: drop-shadow(0 0 10px rgba(255, 215, 0, 0.7));
            border-radius: 10px;
        }
        .game-wrapper.game-started .game-card {
            height: 65vh;
            width: 100%;
            border-radius: 0;
            overflow-y: auto;
            text-align: left;
        }

        /* ============ MASAÜSTÜ DÜZEN (769px ve üzeri) ============ */
        @media (min-width: 769px) {
            /* Başlangıçta card'ı KESİN ortala */
            .game-wrapper:not(.game-started) {
                display: flex !important;
                justify-content: center !important;
                align-items: center !important;
                min-height: 100vh;
                width: 100%;
            }
            
            .game-wrapper:not(.game-started) .game-card {
                width: 700px;
                max-width: 90%;
                margin: 0 auto;
            }
            
            /* İçerik ortalama */
            #landing-page, #intro-section {
                display: flex;
                flex-direction: column;
                align-items: center;
                text-align: center;
                width: 100%;
                height: 100%;
            }

            /* Oyunda yan yana düzen */
            .game-wrapper.game-started {
                flex-direction: row;
            }
            .game-wrapper.game-started .image-panel {
                flex: 1;
                width: auto;
                height: auto;
            }
            .game-wrapper.game-started .game-card {
                flex: 1;
                height: auto;
                width: auto;
                border-radius: 15px;
            }
        }

        /* ============ MOBİL YATAY MOD ============ */
        @media (max-width: 768px) and (orientation: landscape) {
            .game-wrapper.game-started {
                flex-direction: row;
            }
            .game-wrapper.game-started .image-panel {
                width: 45%;
                height: 100vh;
            }
            .game-wrapper.game-started .game-card {
                width: 55%;
                height: 100vh;
            }
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        h1, h2 {
            color: #2c3e50;
            margin-bottom: 15px;
            margin-top: 10px;
        }
        
        h1 {
            font-size: 2.4em;
        }
        
        h2 {
            font-size: 1.8em;
        }
        
        #landing-page {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            width: 100%;
            min-height: 100%;
        }
        
        #intro-section {
            display: none;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            width: 100%;
            min-height: 100%;
        }

        #game-section, #result-section {
            display: none;
            text-align: left;
            width: 100%;
        }
        
        .info-box {
            background-color: rgba(52, 152, 219, 0.1);
            border: 2px solid rgba(52, 152, 219, 0.3);
            border-radius: 12px;
            padding: 15px;
            margin: 15px 0;
            text-align: left;
            box-shadow: 0 4px 15px rgba(52, 152, 219, 0.1);
            max-height: 40vh;
            overflow-y: auto;
        }
        
        .info-box h3 {
            color: #3498db;
            margin-top: 0;
            margin-bottom: 15px;
            font-size: 1.5em;
        }
        
        .info-box ul {
            margin: 10px 0;
            padding-left: 20px;
        }
        
        .info-box li {
            margin: 5px 0;
            line-height: 1.4;
            font-size: 1.1em;
        }
        
        #start-activity-button {
            padding: 15px 30px;
            font-size: 1.4em;
            background-color: #e74c3c;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.2s;
            margin-top: 20px;
        }
        
        #start-activity-button:hover {
            background-color: #c0392b;
            transform: translateY(-2px);
        }
        
        #result-section h2 {
            text-align: center;
        }
        
        #audio-section {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 20px;
        }
        
        audio {
            display: none; /* Varsayılan oynatıcıyı gizle */
        }
        
        .custom-audio-player {
            width: 100%;
            max-width: 400px;
            height: 60px;
            background-color: #2c3e50;
            border-radius: 30px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 20px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            border: 3px solid #f39c12;
        }

        .play-pause-btn {
            width: 40px;
            height: 40px;
            background-color: #f39c12;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .play-pause-btn:hover {
            background-color: #d35400;
        }

        .play-pause-btn svg {
            fill: white;
        }

        .mute-btn {
            width: 40px;
            height: 40px;
            background-color: #2c3e50;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: background-color 0.3s;
            margin-left: 10px;
            border: 2px solid #34495e;
        }

        .mute-btn:hover {
            background-color: #34495e;
        }

        .mute-btn svg {
            fill: #f0f4f8;
        }

        .progress-container {
            flex: 1;
            height: 14px;
            background-color: #1a2332;
            border-radius: 7px;
            margin: 0 12px;
            cursor: pointer;
            position: relative;
            overflow: hidden;
            border: 1px solid #f39c12;
            min-width: 120px;
            transition: all 0.3s ease;
        }
        
        .progress-container:hover {
            border-color: #f1c40f;
            background-color: #0f1621;
            box-shadow: 0 0 8px rgba(241, 196, 15, 0.3);
        }
        
        .progress-container:hover {
            background-color: #2c3e50;
        }
        
        .progress-container:before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
            transform: translateX(-100%);
            transition: transform 0.5s;
        }
        
        .progress-container:hover:before {
            transform: translateX(100%);
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #f39c12, #f1c40f);
            width: 0%;
            border-radius: 7px;
            transition: width 0.1s linear;
            box-shadow: 0 0 5px rgba(241, 196, 15, 0.5);
        }

        .time-display {
            color: #f0f4f8;
            font-size: 0.9em;
            font-weight: bold;
        }

        #options button {
            display: block;
            width: 100%;
            padding: 15px;
            margin-top: 15px;
            font-size: 1.3em;
            cursor: pointer;
            background-color: #3498db;
            color: white;
            border: none;
            border-radius: 8px;
            transition: background-color 0.3s, transform 0.2s;
        }

        #options button:hover {
            background-color: #2980b9;
            transform: translateY(-2px);
        }

        #options button:disabled {
            background-color: #bdc3c7;
            cursor: not-allowed;
        }

        #feedback {
            margin-top: 25px;
            font-size: 1.4em;
            font-weight: bold;
            text-align: center;
            transition: opacity 0.3s;
        }

        .correct {
            color: #1e8449; /* Daha koyu yeşil tonu */
        }

        .wrong {
            color: #e74c3c;
        }

        #start-button, #restart-button {
            padding: 15px 30px;
            font-size: 1.4em;
            background-color: #2ecc71;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.2s;
            margin-top: 20px;
        }

        #restart-button {
            display: block;
            margin: 20px auto 0 auto;
        }
        
        #start-button:hover, #restart-button:hover {
            background-color: #27ae60;
            transform: translateY(-2px);
        }

        #player-name-input {
            margin-bottom: 20px;
            padding: 12px;
            font-size: 1.2em;
            text-align: center;
            background-color: rgba(255, 255, 255, 0.5);
            backdrop-filter: blur(5px);
            color: #333;
            outline: none;
            border-radius: 8px;
            
            border: 10px solid transparent;
            border-image: linear-gradient(45deg, #FFD700, #FFC107, #DAA520) 1;
            filter: drop-shadow(0 0 8px rgba(255, 215, 0, 0.5));
        }

        #player-name-input::placeholder {
            color: rgba(51, 51, 51, 0.7);
        }

        #score-box {
            position: absolute;
            top: 20px;
            right: 20px;
            background-color: rgba(44, 62, 80, 0.8);
            color: white;
            padding: 10px 20px;
            border-radius: 10px;
            font-size: 1.2em;
            font-weight: bold;
            display: none;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
            z-index: 10;
        }
        
        #fullscreen-btn {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: linear-gradient(135deg, #FFD700, #FFC107);
            color: #333;
            width: 50px;
            height: 50px;
            border: none;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            z-index: 10;
            box-shadow: 0 4px 15px rgba(255, 215, 0, 0.4);
        }

        #fullscreen-btn:hover {
            background: linear-gradient(135deg, #FFC107, #DAA520);
            transform: scale(1.1);
            box-shadow: 0 6px 20px rgba(255, 215, 0, 0.6);
        }
        
        #fullscreen-btn svg {
            width: 24px;
            height: 24px;
            fill: #333;
        }
        
        .pocket-watch-svg {
            position: absolute;
            top: 10px;
            left: 10px;
            width: 70px;
            height: 70px;
            display: none;
            z-index: 10;
        }
        
        #time-path {
            fill: none;
            stroke-width: 10;
            stroke-linecap: round;
            transform-origin: 50% 50%;
            transform: rotate(-90deg);
            transition: stroke 0.5s linear;
        }

        #second-hand-line {
            transform-origin: 50% 50%;
            animation: rotateHand 15s linear forwards;
        }

        @keyframes rotateHand {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .confetti-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            overflow: hidden;
            z-index: 20;
        }

        .confetti {
            position: absolute;
            width: 8px;
            height: 8px;
            background-color: #f00;
            opacity: 0;
            animation: confetti-fall 3s ease-out forwards;
        }

        @keyframes confetti-fall {
            0% {
                transform: translate(var(--x-start), var(--y-start)) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            100% {
                transform: translate(var(--x-end), var(--y-end)) rotate(720deg);
                opacity: 0;
            }
        }

        .result-info-box {
            background-color: rgba(60, 179, 113, 0.9);
            color: white;
            padding: 15px 25px;
            border-radius: 10px;
            margin-bottom: 15px;
            font-size: 1.1em;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            font-weight: bold;
        }

        .result-info-box.player-name {
            background-color: rgba(52, 152, 219, 0.9);
        }

        .result-info-box.player-score {
            background-color: rgba(230, 126, 34, 0.9);
        }

        /* ============ MOBIL RESPONSIVE (768px ve altı) ============ */
        @media (max-width: 768px) {
            body {
                overflow-y: auto !important;
            }
            .game-wrapper {
                padding: 10px;
            }
            .game-card {
                width: 100%;
                padding: 15px;
            }
            .game-wrapper.game-started {
                flex-direction: column !important;
                padding: 0;
            }
            .game-wrapper.game-started .image-panel {
                display: flex !important;
                width: 100%;
                height: 35vh;
                padding: 10px;
            }
            .game-wrapper.game-started .image-panel img {
                max-width: 100%;
                max-height: 100%;
                object-fit: contain;
            }
            .game-wrapper.game-started .game-card {
                width: 100%;
                height: 65vh;
                border-radius: 0;
                overflow-y: auto;
                text-align: left;
            }
            @media (orientation: landscape) {
                .game-wrapper.game-started {
                    flex-direction: row !important;
                }
                .game-wrapper.game-started .image-panel {
                    width: 45%;
                    height: 100vh;
                }
                .game-wrapper.game-started .game-card {
                    width: 55%;
                    height: 100vh;
                }
            }
        }
        /* ============ MOBIL RESPONSIVE (768px ve altı) ============ */
        @media (max-width: 768px) {
            body {
                overflow-y: auto; /* İçerik sığmazsa scroll'a izin ver */
            }
            
            .game-wrapper {
                width: 100%;
                min-height: 100vh; /* Ekranı doldur */
                padding: 10px;
                display: flex;
                justify-content: center;
                align-items: center;
            }
            
            /* Başlangıç ve oyun içi genel card yapısı */
            .game-card {
                width: 100%;
                margin: 0;
                padding: 15px;
            }

            /* Başlangıç Ekranları İçin Özel Küçültme */
            .game-wrapper:not(.game-started) .game-card {
                padding: 10px;
            }
            .game-wrapper:not(.game-started) h1 {
                font-size: 1.2em;
                margin: 5px 0;
            }
            .game-wrapper:not(.game-started) p {
                font-size: 0.8em;
                line-height: 1.4;
            }
            .game-wrapper:not(.game-started) .info-box {
                padding: 8px;
                margin: 8px 0;
            }
            .game-wrapper:not(.game-started) .info-box h3 {
                font-size: 1em;
                margin-bottom: 5px;
            }
            .game-wrapper:not(.game-started) .info-box li {
                font-size: 0.75em;
                margin: 2px 0;
                line-height: 1.3;
            }
            .game-wrapper:not(.game-started) #start-activity-button {
                font-size: 0.9em;
                padding: 8px 16px;
                margin-top: 5px;
            }
                min-height: auto;
                overflow: visible; /* İçerik taşarsa card büyüsün */
            }

            /* Oyun başlayınca resim-soru düzeni */
            .game-wrapper.game-started {
                flex-direction: column;
                padding: 0;
            }
            
            .game-wrapper.game-started .image-panel {
                width: 100%;
                height: 35vh;
                padding: 10px;
                display: flex !important; /* Görünür yap */
            }

            .game-wrapper.game-started .image-panel img {
                max-height: 100%;
                max-width: 100%;
                object-fit: contain;
            }
            
            .game-wrapper.game-started .game-card {
                width: 100%;
                height: 65vh; /* Kalan alanı doldur */
                padding: 15px;
                border-radius: 0;
                overflow-y: auto; /* Soru sığmazsa scroll */
                text-align: left;
            }
            
            /* Yatay Mod Düzenlemeleri */
            @media (orientation: landscape) {
                /* Başlangıç ekranları yatayda daha geniş */
                .game-wrapper:not(.game-started) .game-card {
                    width: 100%;
                    max-height: 95vh;
                    overflow-y: auto;
                }
                
                /* Oyun içi yatay düzen */
                .game-wrapper.game-started {
                    flex-direction: row;
                }
                
                .game-wrapper.game-started .image-panel {
                    width: 45%;
                    height: 100vh;
                }
                
                .game-wrapper.game-started .game-card {
                    width: 55%;
                    height: 100vh;
                }
            }
        }
            /* Oyun başladığında düzen */
            .game-wrapper.game-started {
                flex-direction: column;
                padding: 0;
            }
            
            .game-wrapper.game-started .game-card {
                border-radius: 0;
                padding: 15px;
                text-align: left;
            }
            
            /* Resim paneli */
            .image-panel {
                width: 100%;
                height: 30vh;
                display: flex !important;
                padding: 10px;
            }
            
            .image-panel img {
                max-height: 100%;
                max-width: 100%;
                object-fit: contain;
                border-width: 8px;
            }
            
            /* Form elementleri */
            .info-box {
                width: 100%;
                padding: 10px;
                margin: 8px 0;
                max-height: 45vh;
                overflow-y: auto;
            }
            
            .info-box h3 {
                font-size: 0.95em;
                margin-bottom: 8px;
            }
            
            .info-box p {
                font-size: 0.8em;
                margin-bottom: 5px;
            }
            
            .info-box ul {
                padding-left: 15px;
                margin: 5px 0;
            }
            
            .info-box li {
                font-size: 0.75em;
                line-height: 1.3;
                margin: 3px 0;
            }
            
            input, button {
                width: 100%;
                max-width: 300px;
            }
            
            /* YATAY MOD (Landscape) */
            @media (orientation: landscape) and (max-height: 768px) {
                body {
                    overflow: hidden;
                    height: 100vh;
                }
                
                .game-wrapper {
                    height: 100vh;
                    width: 100vw;
                    padding: 0;
                }
                
                /* Yatay modda başlangıç ekranları */
                .game-card {
                    max-height: calc(100vh - 20px);
                    max-width: 90vw;
                }
                
                h1 {
                    font-size: 1.1em;
                    margin: 5px 0;
                }
                
                h2 {
                    font-size: 0.95em;
                    margin: 5px 0;
                }
                
                p {
                    font-size: 0.8em;
                    margin: 5px 0;
                }
                
                .info-box {
                    max-height: 35vh;
                    padding: 8px;
                }
                
                .info-box li {
                    font-size: 0.7em;
                    margin: 2px 0;
                }
                
                #start-button, #start-activity-button {
                    padding: 8px 16px;
                    font-size: 0.85em;
                }
                
                .custom-audio-player {
                    height: 40px;
                }
                
                .game-wrapper.game-started {
                    flex-direction: row !important;
                }
                
                /* Sol panel - Resim */
                .image-panel {
                    width: 40%;
                    height: 100vh;
                    padding: 10px;
                }
                
                .image-panel img {
                    max-height: 90vh;
                    max-width: 100%;
                }
                
                /* Sağ panel - Soru */
                .game-card {
                    width: 60%;
                    height: 100vh;
                    overflow-y: auto;
                    padding: 15px;
                }
            }



            /* Mobil font boyutları */
            h1 {
                font-size: 1.2em;
                margin: 10px 0;
            }

            h2 {
                font-size: 1em;
                margin: 8px 0;
            }
            
            h3 {
                font-size: 0.95em;
                margin: 8px 0;
            }
            
            p {
                font-size: 0.85em;
                line-height: 1.3;
                margin: 8px 0;
            }
            
            #start-button, #start-activity-button {
                padding: 10px 20px;
                font-size: 0.9em;
                margin: 10px 0;
            }
            
            #player-name-input {
                padding: 8px;
                font-size: 0.9em;
                margin: 10px 0;
                width: 100%;
                max-width: 250px;
            }

            #options button {
                padding: 10px;
                font-size: 0.9em;
                margin: 5px 0;
            }

            /* Diğer mobil elementler */
            #score-box {
                top: 10px;
                right: 10px;
                padding: 5px 10px;
                font-size: 0.9em;
            }

            #fullscreen-btn {
                bottom: 10px;
                right: 10px;
                width: 40px;
                height: 40px;
            }
            
            .pocket-watch-svg {
                width: 50px;
                height: 50px;
            }
            
            .custom-audio-player {
                max-width: 100%;
                height: 45px;
                padding: 0 10px;
                margin: 10px 0;
            }
            
            .custom-audio-player .play-pause-btn {
                width: 35px;
                height: 35px;
            }
            
            .custom-audio-player .mute-btn {
                width: 35px;
                height: 35px;
            }
            }
        }
        }
    </style>
</head>
<body>
    <audio id="background-music" src="arka_plan.mp3" loop></audio>

<div class="background-svgs">
    <svg class="moon" width="100" height="100" viewBox="0 0 24 24" style="top: 10%; left: 15%;">
        <path d="M12 2A10 10 0 1 0 12 22A10 10 0 0 0 12 2ZM10.5 4.5A8.5 8.5 0 0 1 12 21A8.5 8.5 0 0 1 10.5 4.5Z" fill="white" stroke="white" stroke-width="0.5" transform="rotate(20 12 12)"/>
    </svg>
    <svg class="star" width="20" height="20" viewBox="0 0 24 24" style="top: 25%; right: 20%;">
        <path d="M12 .587l3.668 7.568L24 9.429l-6.177 5.765 1.54 8.215L12 18.896l-7.363 4.513 1.54-8.215L0 9.429l8.332-1.274z"/>
    </svg>
    <svg class="star" width="15" height="15" viewBox="0 0 24 24" style="top: 40%; left: 5%;">
        <path d="M12 .587l3.668 7.568L24 9.429l-6.177 5.765 1.54 8.215L12 18.896l-7.363 4.513 1.54-8.215L0 9.429l8.332-1.274z"/>
    </svg>
    <svg class="star" width="25" height="25" viewBox="0 0 24 24" style="bottom: 10%; right: 40%;">
        <path d="M12 .587l3.668 7.568L24 9.429l-6.177 5.765 1.54 8.215L12 18.896l-7.363 4.513 1.54-8.215L0 9.429l8.332-1.274z"/>
    </svg>
</div>

<div class="confetti-container" id="confetti-container"></div>

<div class="game-wrapper">
    <div id="image-panel" class="image-panel" style="display: none;">
        <img id="game-image" alt="Oyun Görseli">
    </div>

    <div class="game-card">
        <div id="landing-page">
            <h1>Kuzey'in Coğrafi Macerası</h1>
            <p><strong>Hoş geldin!</strong> Bu etkinlikte, harika bir coğrafyacı olmak için bilmen gereken temel kavramları keşfedecek, doğa ve insan arasındaki ilişkiyi sorgulayacaksın.</p>
            <div class="info-box">
                <h3>Konu ve Kazanımlar</h3>
                <p>Bu etkinliğin konusu, doğal ve beşeri unsurlar arasındaki etkileşimdir.</p>
                <ul>
                    <li>Doğal ve beşeri faktörlerin nüfusun dağılışı üzerindeki etkilerini açıklar.</li>
                    <li>Çevre sorunlarına karşı bireysel ve toplumsal sorumluluklarını fark eder.</li>
                    <li>Doğal kaynakların sürdürülebilir kullanımının önemini kavrar.</li>
                    <li>Coğrafi verileri yorumlayarak çıkarımlarda bulunur.</li>
                    <li>Coğrafyanın bir bilim dalı olarak karmaşık ilişkileri anlamlandırmadaki rolünü keşfeder.</li>
                </ul>
            </div>
            <button id="start-activity-button">Etkinliğe Başla</button>
        </div>
        
        <div id="intro-section">
            <h1>Oynayarak Öğren: Kuzey'in Coğrafi Macerası</h1>
            <p><strong>Kuzey</strong> adlı bir genç coğrafyacı olarak büyülü bir yolculuğa çıkacaksın. Maceraya başlamadan önce hikayeyi dinle.</p>
            <div id="audio-section">
                <audio id="story-audio" src="kuzey.mp3" preload="metadata"></audio>
                <div class="custom-audio-player">
                    <div class="play-pause-btn">
                        <svg id="play-icon" xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24">
                            <path d="M8 5v14l11-7z" />
                            <path d="M0 0h24v24H0z" fill="none" />
                        </svg>
                        <svg id="pause-icon" xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24" style="display: none;">
                            <path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z" />
                            <path d="M0 0h24v24H0z" fill="none" />
                        </svg>
                    </div>
                    <div class="mute-btn">
                        <svg id="volume-up-icon" xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24">
                            <path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z" />
                            <path d="M0 0h24v24H0z" fill="none" />
                        </svg>
                        <svg id="volume-off-icon" xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24" style="display: none;">
                            <path d="M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51A6.958 6.958 0 0 0 19 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06a8.99 8.99 0 0 0 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z" />
                            <path d="M0 0h24v24H0z" fill="none" />
                        </svg>
                    </div>
                    <div class="progress-container" title="Ses dosyasını ileri/geri almak için bu çubuğa tıklayın" role="slider" aria-label="Ses ilerleme çubuğu">
                        <div class="progress-bar" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0"></div>
                    </div>
                    <div class="time-display">0:00 / 0:00</div>
                </div>
            </div>
            <input type="text" id="player-name-input" placeholder="Adını ve Soyadını Yaz">
            <p>Dinlediğin hikayedeki coğrafi kavramları hatırla ve seçimlerini bu doğrultuda yap. Yanlış bir seçim yaparsan yolun uzar, doğru kararlar seni coğrafi bilgeliğe ulaştırır. Hazırsan yolculuk başlasın!</p>
            <button id="start-button">Yolculuğa Başla!</button>
        </div>

        <div id="game-section">
            <h2 id="question-text"></h2>
            <div id="options"></div>
            <div id="feedback"></div>
        </div>

        <div id="result-section">
            <h2 id="result-main-text"></h2>
            <div id="player-name-display" class="result-info-box player-name"></div>
            <div id="player-score-display" class="result-info-box player-score"></div>
            <p id="result-extra-text" style="text-align: center; margin-top: 20px; font-size: 1.1em;"></p>
            <button id="restart-button">Yeniden Oyna</button>
        </div>
    </div>
</div>

<div id="score-box">Puan: <span id="score">0</span></div>

<div id="countdown-clock" class="pocket-watch-svg">
    <svg width="100%" height="100%" viewBox="0 0 100 100">
        <circle cx="50" cy="50" r="45" fill="#f5f5f5" stroke="#333" stroke-width="3" />
        <circle cx="50" cy="50" r="3" fill="#333" />
        
        <path id="time-path" d="" />
        
        <line id="second-hand-line" x1="50" y1="50" x2="50" y2="15" stroke="#333" stroke-width="2" stroke-linecap="round" />
    </svg>
</div>

<button id="fullscreen-btn" title="Tam Ekran">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
        <path d="M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"/>
    </svg>
</button>

<script>
    const questions = [
        {
            text: "Kuzey'in yolculuğa çıkarken ilk işi, elindeki küreden Türkiye'nin en kalabalık yerleşmesinin nüfus yoğunluğunu ve dağılışını incelemek oldu. Sence Kuzey'in bu hareketi, coğrafyada 'insanlar nerede ve neden yaşıyor?' sorusuna cevap bulmasına nasıl yardımcı olurdu?",
            image: "1.png",
            options: [
                "Ekonomik faaliyetlerin yerleşme üzerindeki etkilerini anlamasını sağlardı.",
                "Nüfusun dağılışını gösteren haritaları okuyarak, insanların bir bölgede yoğunlaşma nedenlerini keşfederdi.",
                "Sadece yer şekillerini inceleyerek nüfusun kalabalık olduğu yerleri belirlerdi."
            ],
            answer: "Nüfusun dağılışını gösteren haritaları okuyarak, insanların bir bölgede yoğunlaşma nedenlerini keşfederdi."
        },
        {
            text: "Kuzey, büyülü küredeki tablo ve grafiklere bakarak nüfusun zamanla nasıl değiştiğini anlamlandırdı. Bu durumu kendi hayatından bir örnekle ilişkilendirsen, en çok hangi konuyu merak eder ve araştırırdın?",
            image: "2.png",
            options: [
                "Yaşadığın şehrin adının zamanla nasıl değiştiğini",
                "Yakın çevrendeki akarsuların neden farklı mevsimlerde farklı debilerle aktığını",
                "Okulundaki öğrenci sayısının yıllara göre nasıl değiştiğini"
            ],
            answer: "Okulundaki öğrenci sayısının yıllara göre nasıl değiştiğini"
        },
        {
            text: "Yolculuğunda yeraltı şehrindeki rehberin anlattıklarıyla Kuzey, toprakların ve bitki çeşitliliğinin önemini kavradı. Bu hikayedeki gibi, senin de yaşadığın çevredeki bitki örtüsünü korumak için en sorumlu olduğunu düşündüğün şey ne olurdu?",
            image: "3.png",
            options: [
                "Yakın çevrende gördüğün yabancı bitki türlerini yok etmek.",
                "Fabrikaların atıklarını doğaya bırakmasını engellemek için kampanyalar düzenlemek.",
                "Yeni bitki türleri keşfedip onları adlandırmak."
            ],
            answer:"Yeni bitki türleri keşfedip onları adlandırmak."
        },
        {
            text: "Kuzey, kalabalık yerleşmede oluşan atık sorunlarını fark ederek çözüm yolları aradı ve bir kampanya başlattı. Kuzey'in başlattığı bu kampanyanın amacı, sence en çok hangi duyarlılığı artırmaya yöneliktir?",
            image: "4.png",
            options: [
                "Doğal kaynakların sınırsız olduğuna dair bir bilinç oluşturma.",
                "Çevre sorunlarının sadece yerel bir mesele olduğuna dair farkındalık yaratma.",
                "Yaşadığımız çevrenin sürdürülebilirliğine yönelik bireysel ve toplumsal sorumlulukları vurgulama."
            ],
            answer: "Yaşadığımız çevrenin sürdürülebilirliğine yönelik bireysel ve toplumsal sorumlulukları vurgulama."
        },
        {
            text: "Hikayenin sonunda Kuzey, coğrafyanın bir olayı veya mekânı oluşturan tüm unsurların birbiriyle olan ilişkisini anlamlandırma sanatı olduğunu öğrendi. Bu deneyimden yola çıkarak, sen coğrafyacı olmayı en iyi şekilde nasıl tanımlardın?",
            image: "5.png",
            options: [
                "Dünyadaki tüm yerlerin isimlerini ve konumlarını ezberleyen kişi.",
                "Doğal ve beşeri olaylar arasındaki karmaşık bağlantıları gören ve yorumlayan kişi.",
                "Sadece hava durumu tahminleri yapan kişi."
            ],
            answer: "Doğal ve beşeri olaylar arasındaki karmaşık bağlantıları gören ve yorumlayan kişi."
        }
    ];

    let currentQuestionIndex = 0;
    let score = 0;
    let playerName = '';
    let attemptCount = 0;
    const initialTimePerQuestion = 15;
    let timerInterval;
    let timerTimeout;

    const landingPage = document.getElementById('landing-page');
    const introSection = document.getElementById('intro-section');
    const gameSection = document.getElementById('game-section');
    const resultSection = document.getElementById('result-section');
    const startActivityButton = document.getElementById('start-activity-button');
    const startButton = document.getElementById('start-button');
    const restartButton = document.getElementById('restart-button');
    const questionText = document.getElementById('question-text');
    const optionsContainer = document.getElementById('options');
    const feedbackText = document.getElementById('feedback');
    const resultMainText = document.getElementById('result-main-text');
    const playerNameDisplay = document.getElementById('player-name-display');
    const playerScoreDisplay = document.getElementById('player-score-display');
    const resultExtraText = document.getElementById('result-extra-text');
    const gameImage = document.getElementById('game-image');
    const gameWrapper = document.querySelector('.game-wrapper');
    const imagePanel = document.getElementById('image-panel');
    const playerNameInput = document.getElementById('player-name-input');
    const scoreBox = document.getElementById('score-box');
    const scoreElement = document.getElementById('score');
    const fullscreenBtn = document.getElementById('fullscreen-btn');
    const countdownClock = document.getElementById('countdown-clock');
    const secondHandLine = document.getElementById('second-hand-line');
    const timePath = document.getElementById('time-path');
    const circumference = 2 * Math.PI * 40;
    const backgroundSvgs = document.querySelector('.background-svgs');
    const confettiContainer = document.getElementById('confetti-container');

    const audio = document.getElementById('story-audio');
    const playPauseBtn = document.querySelector('.play-pause-btn');
    const playIcon = document.getElementById('play-icon');
    const pauseIcon = document.getElementById('pause-icon');
    const progressBar = document.querySelector('.progress-bar');
    const progressContainer = document.querySelector('.progress-container');
    const timeDisplay = document.querySelector('.time-display');

    const bgMusic = document.getElementById('background-music');
    const muteBtn = document.querySelector('.mute-btn');
    const volumeUpIcon = document.getElementById('volume-up-icon');
    const volumeOffIcon = document.getElementById('volume-off-icon');

    function createShootingStar() {
        const star = document.createElement('div');
        star.classList.add('shooting-star');
        star.style.left = `${Math.random() * 100}vw`;
        star.style.top = `${Math.random() * 50 - 20}vh`;
        star.style.animationDelay = `${Math.random() * 5}s`;
        backgroundSvgs.appendChild(star);

        star.addEventListener('animationend', () => {
            star.remove();
        });
    }

    setInterval(createShootingStar, 1000);

    function createConfetti() {
        const colors = ['#f00', '#0f0', '#00f', '#ff0', '#0ff', '#f0f'];
        for (let i = 0; i < 50; i++) {
            const confetti = document.createElement('div');
            confetti.classList.add('confetti');
            confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
            
            const xStart = Math.random() * window.innerWidth - (window.innerWidth / 2);
            const yStart = Math.random() * -100;
            const xEnd = xStart + (Math.random() - 0.5) * 400;
            const yEnd = window.innerHeight + 100;
            
            confetti.style.setProperty('--x-start', `${xStart}px`);
            confetti.style.setProperty('--y-start', `${yStart}px`);
            confetti.style.setProperty('--x-end', `${xEnd}px`);
            confetti.style.setProperty('--y-end', `${yEnd}px`);
            
            confetti.style.animationDelay = `${Math.random() * 0.5}s`;
            confettiContainer.appendChild(confetti);

            confetti.addEventListener('animationend', () => {
                confetti.remove();
            });
        }
    }

    // Custom Audio Player Functions
    function togglePlayPause() {
        if (audio.paused) {
            audio.play().then(() => {
                playIcon.style.display = 'none';
                pauseIcon.style.display = 'block';
            }).catch(error => {
                console.error('Ses çalınamadı:', error);
                alert('Ses dosyası çalınamıyor. Lütfen sayfayı yenileyin.');
            });
        } else {
            audio.pause();
            playIcon.style.display = 'block';
            pauseIcon.style.display = 'none';
        }
    }
    
    function toggleMute() {
    // Hem arka plan müziğini hem de hikaye sesini kontrol et
    if (bgMusic.muted && audio.muted) {
        bgMusic.muted = false;
        audio.muted = false;
        volumeUpIcon.style.display = 'block';
        volumeOffIcon.style.display = 'none';
    } else {
        bgMusic.muted = true;
        audio.muted = true;
        volumeUpIcon.style.display = 'none';
        volumeOffIcon.style.display = 'block';
    }
}


    function updateProgress() {
        if (!audio.duration || isNaN(audio.duration)) {
            timeDisplay.textContent = '0:00 / 0:00';
            progressBar.style.width = '0%';
            return;
        }
        
        const progress = (audio.currentTime / audio.duration) * 100;
        progressBar.style.width = `${progress}%`;
        progressBar.setAttribute('aria-valuenow', Math.round(progress));
        
        // Progress container'ı görünür yap
        if (progressContainer) {
            progressContainer.style.display = 'block';
            progressContainer.style.visibility = 'visible';
            progressContainer.style.opacity = '1';
        }
        
        const currentMinutes = Math.floor(audio.currentTime / 60);
        const currentSeconds = Math.floor(audio.currentTime % 60).toString().padStart(2, '0');
        
        const durationMinutes = Math.floor(audio.duration / 60);
        const durationSeconds = Math.floor(audio.duration % 60).toString().padStart(2, '0');
        
        timeDisplay.textContent = `${currentMinutes}:${currentSeconds} / ${durationMinutes}:${durationSeconds}`;
    }

    function setProgress(e) {
        if (!audio.duration || isNaN(audio.duration)) return;
        
        const width = this.clientWidth;
        const clickX = e.offsetX;
        const duration = audio.duration;
        audio.currentTime = (clickX / width) * duration;
    }

    playPauseBtn.addEventListener('click', togglePlayPause);
    muteBtn.addEventListener('click', toggleMute);
    audio.addEventListener('timeupdate', updateProgress);
    progressContainer.addEventListener('click', setProgress);
    
    // Ses dosyası metadata yüklendiğinde
    audio.addEventListener('loadedmetadata', function() {
        updateProgress();
    });
    
    // Ses dosyası yüklenmeye başladığında
    audio.addEventListener('loadstart', function() {
        timeDisplay.textContent = 'Yükleniyor...';
    });
    
    // Ses dosyası hazır olduğunda
    audio.addEventListener('canplay', function() {
        updateProgress();
    });
    
    // Ses dosyası hata kontrolü
    audio.addEventListener('error', function(e) {
        console.error('Ses dosyası yüklenemedi:', e);
        timeDisplay.textContent = 'Hata!';
    });
    
    // Game Logic
    startActivityButton.addEventListener('click', showIntroSection);
    startButton.addEventListener('click', startGame);
    restartButton.addEventListener('click', restartGame);
    fullscreenBtn.addEventListener('click', toggleFullscreen);
    
    function showIntroSection() {
        landingPage.style.display = 'none';
        introSection.style.display = 'flex';
    }
    
    // Görseli önbelleğe yükleyen fonksiyon
    function preloadImage(url) {
        return new Promise((resolve, reject) => {
            const img = new Image();
            img.onload = () => resolve(url);
            img.onerror = () => reject(new Error(`Görsel yüklenemedi: ${url}`));
            img.src = url;
        });
    }

    // Tüm görselleri önceden yükleyen fonksiyon
    async function preloadAllImages() {
        const imagePromises = questions.map(q => preloadImage(q.image));
        imagePromises.push(preloadImage('bitis.png'));
        try {
            await Promise.all(imagePromises);
        } catch (error) {
            console.error(error.message);
        }
    }

    document.addEventListener('DOMContentLoaded', () => {
        preloadAllImages();
        
        // Başlangıçta image panel'ı kesinlikle gizle
        imagePanel.style.display = 'none';
    });

    function startGame() {
        playerName = playerNameInput.value.trim();
        if (playerName === '') {
            alert('Lütfen adını ve soyadını yazarak başla.');
            return;
        }

        // Arka plan müziğini başlat ve ses seviyesini ayarla
        bgMusic.volume = 0.05;
        bgMusic.play().catch(e => console.log('Arka plan müziği otomatik başlatılamadı:', e));

        introSection.style.display = 'none';
        gameSection.style.display = 'block';
        resultSection.style.display = 'none';
        
        // Oyun başladığında image panel'ı göster
        imagePanel.style.display = 'flex';
        gameWrapper.classList.add('game-started');
        scoreBox.style.display = 'block';
        countdownClock.style.display = 'block';
        
        // Stop intro audio when game starts
        audio.pause();
        playIcon.style.display = 'block';
        pauseIcon.style.display = 'none';
        
        score = 0;
        scoreElement.textContent = score;
        currentQuestionIndex = 0;
        loadQuestion();
    }

    function restartGame() {
        stopTimer();
        resultSection.style.display = 'none';
        gameSection.style.display = 'none';
        introSection.style.display = 'none';
        landingPage.style.display = 'flex';
        
        // Image panel'ı gizle
        imagePanel.style.display = 'none';
        
        gameWrapper.classList.remove('game-started');
        scoreBox.style.display = 'none';
        countdownClock.style.display = 'none';
        playerNameInput.value = '';
        
        feedbackText.textContent = '';
        feedbackText.className = '';
        confettiContainer.innerHTML = '';

        // Stop background music and reset intro audio player
        bgMusic.pause();
        audio.currentTime = 0;
        progressBar.style.width = '0%';
        timeDisplay.textContent = '0:00 / 0:00';
    }

    function loadQuestion() {
        stopTimer();
        if (currentQuestionIndex < questions.length) {
            const currentQuestion = questions[currentQuestionIndex];
            questionText.textContent = currentQuestion.text;
            optionsContainer.innerHTML = '';
            feedbackText.textContent = '';
            attemptCount = 0;

            // Görseli önbellekten al ve animasyonu başlat
            updateImageWithTransition(currentQuestion.image);

            currentQuestion.options.forEach(option => {
                const button = document.createElement('button');
                button.textContent = option;
                button.addEventListener('click', () => checkAnswer(option, currentQuestion.answer));
                optionsContainer.appendChild(button);
            });
            startTimer();
        } else {
            endGame();
        }
    }
    
    // Görsel geçiş animasyonunu başlatan fonksiyon
    function updateImageWithTransition(imageSrc) {
        const currentImage = document.getElementById('game-image');
        
        if (currentImage.src && currentImage.src !== "" && !currentImage.src.includes('data:')) {
            currentImage.classList.add('animating-out');
            currentImage.addEventListener('animationend', () => {
                currentImage.classList.remove('animating-out');
                currentImage.src = imageSrc;
                currentImage.classList.add('animating-in');
            }, { once: true });
        } else {
            currentImage.src = imageSrc;
            currentImage.classList.add('animating-in');
        }
    }
    
    function startTimer() {
        secondHandLine.style.animation = 'none';
        void secondHandLine.offsetWidth;
        secondHandLine.style.animation = `rotateHand ${initialTimePerQuestion}s linear forwards`;

        const startTime = Date.now();

        const updateTimer = () => {
            const elapsedTime = (Date.now() - startTime) / 1000;
            const percentage = elapsedTime / initialTimePerQuestion;
            const dashoffset = circumference * (1 - percentage);
            
            timePath.style.strokeDasharray = `${circumference}`;
            timePath.style.strokeDashoffset = `${dashoffset}`;

            let color;
            if (percentage < 0.5) {
                const greenToYellow = (percentage / 0.5);
                const r = Math.floor(46 + (241 - 46) * greenToYellow);
                const g = Math.floor(204 + (196 - 204) * greenToYellow);
                const b = Math.floor(113 + (15 - 113) * greenToYellow);
                color = `rgb(${r}, ${g}, ${b})`;
            } else {
                const yellowToRed = (percentage - 0.5) / 0.5;
                const r = Math.floor(241 + (231 - 241) * yellowToRed);
                const g = Math.floor(196 + (76 - 196) * yellowToRed);
                const b = Math.floor(15 + (60 - 15) * yellowToRed);
                color = `rgb(${r}, ${g}, ${b})`;
            }

            timePath.style.stroke = color;
            
            if (elapsedTime < initialTimePerQuestion) {
                timerInterval = requestAnimationFrame(updateTimer);
            }
        };

        const d_path = `M 50 10 A 40 40 0 1 1 49.9 10`;
        timePath.setAttribute('d', d_path);
        
        timerInterval = requestAnimationFrame(updateTimer);

        timerTimeout = setTimeout(() => {
            feedbackText.textContent = "Süre doldu! Yolun uzadı.";
            feedbackText.className = 'wrong';
            score -= 30;
            scoreElement.textContent = score;

            optionsContainer.querySelectorAll('button').forEach(button => button.disabled = true);

            setTimeout(() => {
                currentQuestionIndex++;
                loadQuestion();
            }, 3000);
        }, initialTimePerQuestion * 1000);
    }
    
    function stopTimer() {
        if (timerInterval) {
            cancelAnimationFrame(timerInterval);
        }
        if (timerTimeout) {
            clearTimeout(timerTimeout);
        }
        secondHandLine.style.animation = 'none';
        timePath.style.strokeDashoffset = `${circumference}`;
        timePath.style.stroke = 'transparent';
    }

    function checkAnswer(selectedOption, correctAnswer) {
        stopTimer();
        attemptCount++;
        const isCorrect = selectedOption === correctAnswer;
        const buttons = optionsContainer.querySelectorAll('button');
        
        buttons.forEach(button => {
            button.disabled = true;
            if (button.textContent === selectedOption) {
                button.style.backgroundColor = isCorrect ? '#2ecc71' : '#e74c3c';
            }
        });

        if (isCorrect) {
            feedbackText.textContent = "Tebrikler, coğrafi bilgeliğe bir adım daha yaklaştın!";
            feedbackText.className = 'correct';
            score += (attemptCount === 1) ? 100 : 50;
            scoreElement.textContent = score;

            setTimeout(() => {
                currentQuestionIndex++;
                loadQuestion();
            }, 2500);
        } else {
            score -= 20;
            scoreElement.textContent = score;
            feedbackText.textContent = "Kararını gözden geçirmelisin, yolun uzadı ancak coğrafi bilgelik seni bekliyor!";
            feedbackText.className = 'wrong';
            setTimeout(() => {
                buttons.forEach(button => {
                    button.disabled = false;
                    button.style.backgroundColor = '#3498db';
                });
                feedbackText.textContent = '';
                startTimer();
            }, 3000);
        }
    }

    function endGame() {
        stopTimer();
        gameSection.style.display = 'none';
        resultSection.style.display = 'block';
        
        // Oyun bitişinde de image panel görünür olsun
        imagePanel.style.display = 'flex';
        
        const finalImage = document.getElementById('game-image');
        finalImage.src = 'bitis.png';
        finalImage.classList.remove('animating-out');
        finalImage.classList.remove('animating-in');
        finalImage.classList.add('visible');

        resultMainText.innerHTML = `Tebrikler!`;
        playerNameDisplay.innerHTML = `Oyuncu: <strong>${playerName}</strong>`;
        playerScoreDisplay.innerHTML = `Puanın: <strong>${score}</strong>`;
        resultExtraText.innerHTML = `Coğrafi bilgeliğin ve doğru seçimlerinle coğrafyanın sırlarını keşfettin. Kuzey'in macerası sayesinde coğrafyanın sadece bir ders değil, hayatın kendisi olduğunu öğrendin!`;
        
        createConfetti();
        bgMusic.pause();
    }

    function toggleFullscreen() {
        if (!document.fullscreenElement) {
            document.documentElement.requestFullscreen().catch(err => {
                console.log(`Tam ekran moduna geçilemedi: ${err.message}`);
            });
        } else {
            if (document.exitFullscreen) {
                document.exitFullscreen();
            }
        }
    }
</script>

</body>
</html>